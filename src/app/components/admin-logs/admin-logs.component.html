<div class="container">
  <div class="page-header">
    <h1>üìã Login Activity Logs</h1>
    <p>View all login attempts and security events</p>
  </div>

  <div class="controls">
    <div class="filters">
      <div class="form-group">
        <label>Filter by Status:</label>
        <select [(ngModel)]="filterStatus" (change)="applyFilters()" class="form-control">
          <option value="all">All Status</option>
          <option value="success">Success Only</option>
          <option value="failed">Failed Only</option>
        </select>
      </div>

      <div class="form-group">
        <label>Filter by Username:</label>
        <input 
          type="text" 
          [(ngModel)]="filterUser" 
          (input)="applyFilters()"
          placeholder="Search username..."
          class="form-control"
        >
      </div>
    </div>

    <div class="actions">
      <button class="btn btn-secondary" (click)="downloadLogs()">
        üì• Download Logs
      </button>
      <button class="btn btn-danger" (click)="clearLogs()">
        üóëÔ∏è Clear All Logs
      </button>
    </div>
  </div>

  <div class="logs-container">
    <div class="logs-header">
      <h3>Total Logs: {{ filteredLogs.length }}</h3>
      <span class="last-updated">Last updated: {{ filteredLogs[0] ? formatDate(filteredLogs[0].timestamp) : 'N/A' }}</span>
    </div>

    <div class="logs-table">
      <table>
        <thead>
          <tr>
            <th>Timestamp</th>
            <th>User</th>
            <th>Status</th>
            <th>IP Address</th>
            <th>Browser</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let log of filteredLogs">
            <td class="timestamp">{{ formatDate(log.timestamp) }}</td>
            <td class="username"><strong>{{ log.username }}</strong></td>
            <td class="status">
              <span [class]="getStatusClass(log.status)">
                {{ getStatusIcon(log.status) }} {{ log.status.toUpperCase() }}
              </span>
            </td>
            <td class="ip">{{ log.ip || 'N/A' }}</td>
            <td class="browser" title="{{ log.userAgent }}">
              {{ (log.userAgent || 'N/A').substring(0, 50) }}...
            </td>
          </tr>
        </tbody>
      </table>

      <div *ngIf="filteredLogs.length === 0" class="no-logs">
        <p>No login logs found.</p>
        <p *ngIf="filterUser || filterStatus !== 'all'">Try changing your filters.</p>
      </div>
    </div>
  </div>
</div>